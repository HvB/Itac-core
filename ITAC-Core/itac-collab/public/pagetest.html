<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ITAC</title>
    <link rel="stylesheet" href="http://localhost:3000/css/style.css">
    <script type="text/javascript" src="http://localhost:3000/collab/js/lib/socket.io.js">
    </script>
</head>
<body>
<h1>ok</h1>
<p>Welcome to ITAC</p>
<script>
    var socket = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket.emit('EVT_DemandeConnexionZEP', 'pseudo0', '0');
    socket.on('EVT_ReponseOKConnexionZEP', function (idZE, idZEP) {
        //alert('Connexion Autorisee \n ZE renvoyee= ' + idZE + '\n ZEP renvoyee = ' + idZEP);
        //alert(' envoie ARTIFACT direct en ZE');
        socket.emit('EVT_NewArtefactInZE', 'pseudo', idZEP, idZE, JSON.stringify({
            "idAr": "", "creator": "philippe", "owner": "philippe", "typeArtifact": "message", "idConteneur": "ZE1",
            "typeConteneur": "ZE", "createdDate": "", "lastmodifiedDate": "",
            "modifiers": [{"modifier": "philippe", "modifiedDate": ""}], "title": "test", "contenu": "tes de contenu"
        }));
    });
    socket.on('EVT_ReceptionArtefactIntoZE', function (pseudo, idZE, data) {
        console.log('Artefact envoye et bien recu pour la ZE=' + idZE + ' JSON=' + data);
        try {
            console.log('Artefact envoye et bien recu pour la ZE=' + idZE + ' idART=' + JSON.parse(data).idAr);
        } catch (e) {
            console.error("Parsing error:", e);
        }
    });

    var socket1 = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket1.emit('EVT_DemandeConnexionZEP', 'pseudo1', '1');

    var socket2 = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket2.emit('EVT_DemandeConnexionZEP', 'pseudo2', '2');

    var socket3 = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket3.emit('EVT_DemandeConnexionZEP', 'pseudo3', '3');

    var socket4 = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket4.emit('EVT_DemandeConnexionZEP', 'pseudo4', '4');

    var socket5 = io.connect('http://localhost:8080', {transports: ['websocket']});
    socket5.emit('EVT_DemandeConnexionZEP', 'pseudo5', '5');
</script>
</body>
</html>